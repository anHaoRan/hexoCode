<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>箭头函数 | 浩然瞎比比</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">箭头函数</h1><a id="logo" href="/.">浩然瞎比比</a><p class="description">Make more time</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">箭头函数</h1><div class="post-meta"><a href="/2017/07/17/javascript/2016-01-14-fat-arrow-functions/#comments" class="comment-count"></a><p><span class="date">Jul 17, 2017</span><span><a href="/categories/zh-CN/" class="category">zh_CN</a><a href="/categories/zh-CN/javascript/" class="category">javascript</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>介绍一个ES6的新特性，箭头函数或许一个让你用更少行写更多代码的方便工具。它的名字(fat arrow functions)来自于它的语法<code>=&gt;</code>是一个比瘦箭头<code>-&gt;</code>要’胖的箭头’（译者注：但是国内貌似不分胖瘦就叫箭头函数）。Some programmers might already know this type of functions from different languages such as Haskell as ‘lambda expressions’ respectively ‘anonymous functions’. It is called anonymous, as these arrow functions do not have a descriptive function name.（译者注：一些其他语言中的箭头函数，避免不准确就不翻译了 欢迎PR）</p>
<h3 id="有什么益处呢"><a href="#有什么益处呢" class="headerlink" title="有什么益处呢?"></a>有什么益处呢?</h3><ul>
<li>语法: 更少的代码行; 不再需要一遍一遍的打<code>function</code>了</li>
<li>语义: 从上下文中捕获<code>this</code>关键字</li>
</ul>
<h3 id="简单的语法示例"><a href="#简单的语法示例" class="headerlink" title="简单的语法示例"></a>简单的语法示例</h3><p>观察一下这两个功能完全相同的代码片段。你将很快明白箭头函数做了什么。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 箭头函数的一般语法</span></div><div class="line">param =&gt; expression</div><div class="line"></div><div class="line"><span class="comment">// 也可以用用小括号</span></div><div class="line"><span class="comment">// 多参数时小括号是必须的</span></div><div class="line">(param1 [, param2]) =&gt; expression</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 使用functions</span></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>];</div><div class="line"><span class="keyword">var</span> arrFunc = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x * x;</div><div class="line">&#125;);</div><div class="line"><span class="built_in">console</span>.log(arr)</div><div class="line"></div><div class="line"><span class="comment">// 使用箭头函数</span></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>];</div><div class="line"><span class="keyword">var</span> arrFunc = arr.map(<span class="function">(<span class="params">x</span>) =&gt;</span> x*x);</div><div class="line"><span class="built_in">console</span>.log(arr)</div></pre></td></tr></table></figure>
<p>正如你所看到的，箭头函数在这种情况下省去了写小括号，function以及return的时间。我建议你总是使用小括号，因为对于像<code>(x,y) =&gt; x+y</code>这样多参数函数，小括号总是需要的。这仅是以防在不同使用场景下忘记小括号的一种方法。但是上面的代码和<code>x =&gt; x*x</code>是一样的。至此仅是语法上的提升，减少了代码行数并提高了可读性。</p>
<h3 id="Lexically-binding-this"><a href="#Lexically-binding-this" class="headerlink" title="Lexically binding this"></a>Lexically binding <code>this</code></h3><p>这是另一个使用箭头函数的好原因。这是一个关于<code>this</code>上下文的问题。使用箭头函数，你不需要再担心<code>.bind(this)</code>也不用再设置<code>that = this</code>了，因为箭头函数继承了外围作用域的<code>this</code>值。看一下下面的<a href="https://jsfiddle.net/pklinger/rw94oc11/" target="_blank" rel="external">示例</a>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 全局定义 this.i</span></div><div class="line"><span class="keyword">this</span>.i = <span class="number">100</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> counterA = <span class="keyword">new</span> CounterA();</div><div class="line"><span class="keyword">var</span> counterB = <span class="keyword">new</span> CounterB();</div><div class="line"><span class="keyword">var</span> counterC = <span class="keyword">new</span> CounterC();</div><div class="line"><span class="keyword">var</span> counterD = <span class="keyword">new</span> CounterD();</div><div class="line"></div><div class="line"><span class="comment">// 不好的例子</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CounterA</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// CounterA的`this`实例 (!!调用时忽略了此实例)</span></div><div class="line">  <span class="keyword">this</span>.i = <span class="number">0</span>;</div><div class="line">  setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// `this` 指向全局(global)对象,而不是CounterA的`this`</span></div><div class="line">    <span class="comment">// 所以从100开始计数,而不是0 (本地的this.i)</span></div><div class="line">    <span class="keyword">this</span>.i++;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"counterA"</span>).innerHTML = <span class="keyword">this</span>.i;</div><div class="line">  &#125;, <span class="number">500</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 手动绑定 that = this</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CounterB</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.i = <span class="number">0</span>;</div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    that.i++;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"counterB"</span>).innerHTML = that.i;</div><div class="line">  &#125;, <span class="number">500</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 使用 .bind(this)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CounterC</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.i = <span class="number">0</span>;</div><div class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.i++;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"counterC"</span>).innerHTML = <span class="keyword">this</span>.i;</div><div class="line">  &#125;.bind(<span class="keyword">this</span>), <span class="number">500</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 箭头函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CounterD</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.i = <span class="number">0</span>;</div><div class="line">  setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">this</span>.i++;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"counterD"</span>).innerHTML = <span class="keyword">this</span>.i;</div><div class="line">  &#125;, <span class="number">500</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多有关箭头函数的内容可以查看<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="external">MDN</a>。更多语法选项请看<a href="http://jsrocks.org/2014/10/arrow-functions-and-their-scope/" target="_blank" rel="external">这里</a>.</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/07/17/javascript/2016-01-13-tip-to-measure-performance-of-a-javascript-block/" class="pre">测量javascript代码块性能的小知识</a><a href="/2017/07/17/javascript/2016-01-15-even-simpler-way-of-using-indexof-as-a-contains-clause/" class="next">更简单的使用indexOf实现contains功能</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#有什么益处呢"><span class="toc-text">有什么益处呢?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单的语法示例"><span class="toc-text">简单的语法示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lexically-binding-this"><span class="toc-text">Lexically binding this</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/30/20170730/">HTML5 新特性</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/文本滚动-20170725/">文本滚动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2017-04-03-why-you-should-use-Object.is()-in-equality-comparison/">为什么你应该在相等比较中使用 Object.is()</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2017-03-16-tapping-for-quick-debugging/">使用 tap 来快速 debug</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2017-03-12-3-array-hacks/">Array 的三个技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2017-03-09-working-with-websocket-timeout/">处理 Websocket 超时问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2017-01-19-binding-objects-to-functions/">给函数 Bind 对象</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2016-10-28-three-useful-hacks/">三个实用的javascript小技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2016-08-25-keyword-var-vs-let/">var和ES6的let</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/javascript/2016-08-17-break-continue-loop-functional/">break 或 continue 循环函数</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/zh-CN/">zh_CN</a><span class="category-list-count">68</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/zh-CN/angular/">angular</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zh-CN/javascript/">javascript</a><span class="category-list-count">65</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zh-CN/react/">react</a><span class="category-list-count">1</span></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/前端日记/" style="font-size: 15px;">前端日记</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/一些有用的网站/" style="font-size: 15px;">一些有用的网站</a> <a href="/tags/【前端日志】/" style="font-size: 15px;">【前端日志】</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/MacAPP/" style="font-size: 15px;">MacAPP</a> <a href="/tags/Mac-APP/" style="font-size: 15px;">Mac APP</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/table/" style="font-size: 15px;">table</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/人生规划-人生计划/" style="font-size: 15px;">人生规划-人生计划</a> <a href="/tags/掘金/" style="font-size: 15px;">掘金</a> <a href="/tags/Function/" style="font-size: 15px;">Function</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/demo/" style="font-size: 15px;">demo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">anhr.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>